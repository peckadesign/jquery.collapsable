/* jquery.collapsable v2.0.0 | MIT License | Radek Šerý <radek.sery@peckadesign.cz> */
!function(t){function e(){return"ca-uid-"+d++}function a(e,a){var l=[];this.each(function(){var s=t(this).data("collapsable");if(s){var i=s.parent.uid;-1===l.indexOf(i)&&(l.push(i),s.parent[e](a))}})}function l(){var e=this.opts;if((this.$extLinks=t(e.extLinks.selector).filter("a")).length){this.$extLinks.on("click.collapsable",function(a){e.extLinks.preventDefault&&a.preventDefault();var l=t(t(this).attr("href")).data("collapsable");l&&l.$controlLink.first().trigger(e.event+".collapsable",a)})}}function s(){var e=window.location.href,a=e.search(/#/),l=-1,s=-1,i=t(t.map(this.items,function(t){return t.$collapsable.get()}));if(-1===a||(e=e.substring(a+1),s=i.index(t("#"+e)),-1===s||(this.items[s].defaultExpanded=!0,!this.opts.grouped))){if(this.opts.grouped){if(l=i.index(t("."+this.opts.classNames.defaultExpanded)),-1!==l)return void(this.items[l].defaultExpanded=!0)}else{var n=this;i.each(function(e){t(this).hasClass(n.opts.classNames.defaultExpanded)&&(l=e,n.items[e].defaultExpanded=!0)})}-1!==s||-1!==l||this.opts.collapsableAll||(this.items[0].defaultExpanded=!0)}}function i(){var e=t.Event("init.collapsable"),a=this.opts,l=this.items,s=a.fx;a.fx&&(a.fx="toggle");for(var i=l.length,n=!a.collapsableAll,o=0;i>o;o++)l[o].defaultExpanded?(l[o].expand(e,null,n),n=!1):l[o].collapse(e,null,!0);a.fx=s}function n(){var t=this.opts;"slide"===t.fx?t.fx={expand:"slideDown",collapse:"slideUp"}:"fade"===this.opts.fx&&(t.fx={expand:"fadeIn",collapse:"fadeOut"}),("slide"===t.fx||"fade"===t.fx)&&(t.fxDuration=t.fxDuration||500)}function o(){var a=this;a.id||(a.id=e(),a.$collapsable.attr("id",this.id));var l=a.$box.attr("id")||a.id+"-ca-box";a.$box.attr("id",l).data("ca-pre-init-style",a.$box.attr("style")),a.$control.each(function(){var e,s=t(this);s.is("a")?e=s:(e=s.find("a")).length||(s.wrapInner('<a data-ca-created href="#'+a.id+'"></a>'),e=s.find("a")),e.addClass("ca-link"),e.attr("aria-controls",l)})}function r(t,e){var a=this.parent.opts,l=this,s="expanded",i=a.classNames.expanded,n=a.classNames.collapsed;if("collapse"===t&&(s="collapsed",i=a.classNames.collapsed,n=a.classNames.expanded),this.parent.$extLinks.filter("[href=#"+this.id+"]")["expand"===t?"addClass":"removeClass"](a.extLinks.activeClass),this.$collapsable.removeClass(n).addClass(i),this.$controlLink.attr("aria-expanded","expand"===t),this.$box.attr("aria-hidden","expand"!==t),"object"==typeof a.fx)this.$box[a.fx[t]](a.fxDuration,function(){l.$collapsable.trigger(s+".collapsable")});else{"toggle"==a.fx&&this.$box["expand"===t?"show":"hide"]();setTimeout(function(){l.$collapsable.trigger(s+".collapsable")},a.fxDuration)}return!0}var p={control:".ca-control",box:".ca-box",event:"click",fx:!1,fxDuration:0,grouped:!1,collapsableAll:!0,preventDefault:!0,extLinks:{selector:null,preventDefault:!1,activeClass:"ca-ext-active"},classNames:{expanded:"ca-expanded",collapsed:"ca-collapsed",defaultExpanded:"ca-default-expanded"}},c={init:function(t){return new h(this,t)},expandAll:function(t){a.call(this,"expandAll",t)},collapseAll:function(t){a.call(this,"collapseAll",t)},destroy:function(t){a.call(this,"destroy",t)}},d=0,h=function(a,o){this.opts=t.extend(!0,{},t.fn.collapsable.defaults,o),this.items=[];var r=this;return this.uid=e(),this.promiseOpen=!1,l.call(this),n.call(this),a.each(function(){var t=new f(r,this);t.$box.length&&t.$control.length&&r.items.push(t)}),s.call(this),i.call(this),this};h.prototype.getExpanded=function(){for(var t=[],e=this.items.length,a=0;e>a;a++)this.items[a].isExpanded()&&t.push(a);return t},h.prototype.expandAll=function(e){if(!this.opts.grouped||!this.getExpanded().length)for(var a=t.Event("expandAll.collapsable"),l=this.items.length,s=0;l>s;s++)if(!this.items[s].isExpanded()){var i=this.items[s].expand(a,e);if(this.opts.grouped&&i)break}},h.prototype.collapseAll=function(e){for(var a=t.Event("collapseAll.collapsable"),l=this.getExpanded(),s=l.length,i=0;s>i;i++)this.items[l[i]].collapse(a,e)},h.prototype.destroy=function(){for(var e=this.opts,a=this.items.length,l=0;a>l;l++){var s=this.items[l];s.$collapsable.removeClass(e.classNames.collapsed+" "+e.classNames.expanded).removeData("collapsable").off(e.event+".collapsable"),s.$control.removeClass("ca-link"),s.$control.find(".ca-link").removeClass("ca-link"),s.$control.find("[data-ca-created]").each(function(){t(this).parent().html(t(this).html())});var i=s.$box.data("ca-pre-init-style")||"";s.$box.attr("style",i).removeData("ca-pre-init-style"),s.$collapsable.trigger("destroy.collapsable")}this.$extLinks.off("click.collapsable")};var f=function(e,a){if(this.parent=e,this.$collapsable=t(a),this.id=this.$collapsable.attr("id"),this.$control=this.$collapsable.find(e.opts.control),this.$box=this.$collapsable.find(e.opts.box),0!=this.$control.length&&0!=this.$box.length){var l=this,s=this.parent.opts;return o.call(this),this.$controlLink=this.$control.find(".ca-link"),this.$controlLink.on(s.event+".collapsable",function(t,e){var a=e?e:t;s.preventDefault&&t.preventDefault(),l.isExpanded()?l.collapse(a):l.expand(a)}),this.$collapsable.data("collapsable",this),this}};f.prototype.expand=function(e,a,l){var s=this.parent.opts,i=this.parent.getExpanded();if(this.parent.promiseOpen=!0,s.grouped&&i.length&&this.parent.items[i[0]].collapse(e,a,l)===!1)return this.parent.promiseOpen=!1,!1;this.parent.promiseOpen=!1;var n=t.Event("expand.collapsable",{customData:a,originalEvent:e});return this.$collapsable.trigger(n),n.isDefaultPrevented()&&!l?(!s.collapsableAll&&s.grouped&&this.parent.items[i[0]].expand(e,a,!0),!1):r.call(this,"expand",e)},f.prototype.collapse=function(e,a,l){var s=this.parent.opts;if(!s.collapsableAll&&!this.parent.promiseOpen&&this.parent.getExpanded().length<2)return!1;var i=t.Event("collapse.collapsable",{customData:a,originalEvent:e});return this.$collapsable.trigger(i),i.isDefaultPrevented()&&!l?!1:r.call(this,"collapse",e)},f.prototype.isExpanded=function(){return this.$collapsable.hasClass(this.parent.opts.classNames.expanded)},t.fn.collapsable=function(e){if(c[e])return c[e].apply(this,Array.prototype.slice.call(arguments,1));if("object"==typeof e||!e){c.init.apply(this,arguments);return this}t.error("Method "+e+" does not exist on jQuery.collapsable")},t.fn.collapsable.defaults=p}(jQuery);
